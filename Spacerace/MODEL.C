#include "model.h"

/*
* Sets the spaceship's coordinates to its starting position, (320,350)
*/
void init_spaceship(Spaceship *spaceship)
{
    spaceship->x = 320;             /*start middle of screen*/
    spaceship->y = 350;             /*start near bottom of screen*/
    spaceship->delta_y = 0;         /*not moving at start*/
}

/*
* Sets the asteroids' coordinates to their starting positions
* x - a randomly generated x coordinate between 8 and 632
* y - a fixed y coordinate for each individual asteroid
* delta_x - the rate of change of each asteroid
*/
void init_asteroid(Asteroid *asteroid, unsigned int x, unsigned int y, int delta_x)
{
    asteroid->x = x;                    
    asteroid->y = y;                    
    asteroid->delta_x = delta_x;        /*add a constant speed later*/
}

/*
* Plots the spaceships and asteroids to their starting positions
*/
void init_model(Model *model)
{
    int i;
    int j = 0;
    int k = 1;

    int asteroid_x_positions[] = {344, 8, 504, 216, 88, 600, 280, 168, 392, 24,
                                    440, 104, 376, 264, 152, 632, 200, 40, 536, 280,
                                    280, 392, 152, 616, 72, 328, 488, 440, 136, 392,
                                    440, 280, 24};

    init_spaceship(&model->spaceship);

    model->lives = 3;
    model->score = 0;

    for (i = 0; i < 33; i += 3)
    {
        int y = (j << 5) + 8;

        init_asteroid(&model->asteroid[i], asteroid_x_positions[i], y, 2 * k);
        init_asteroid(&model->asteroid[i+1], asteroid_x_positions[i+1], y, 2 * k);
        init_asteroid(&model->asteroid[i+2], asteroid_x_positions[i+2], y, 2 * k);

        j += 1;
        k *= -1;
        }
}

/*
* Moves a single asteroid x spaces
*/
void move_asteroid(Asteroid *asteroid)
{
    asteroid->x += asteroid->delta_x;   /*the x is moves delta x spaces*/
}

/*
* Moves the spaceship y spaces
*/
void move_spaceship(Spaceship *spaceship)
{
    spaceship->y += spaceship->delta_y;     /*the y is moves delta y spaces*/
}

void reset_spaceship(Spaceship *spaceship)
{
    spaceship->x = 320;
    spaceship->y = 350;
}

